<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    <title>XXXX</title>
    <link rel="stylesheet" type="text/css" href="../css/logd.css" />

    <!-- å¼•å…¥ä¸è’œå­è®¡æ•° -->
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>

<body class="with-sidebar">

    <!-- header -->
    <header>
        <h1>XXXX</h1>

        <section class="doc-main-info">
            <p class="doc-author text-comment em-comment">George</p>
            <p class="doc-last-update text-comment em-comment">24-09-22</p>
            <p class="doc-first-on text-comment em-comment">24-09-16</p>

            <p class="text-comment em-comment">
                <span id="busuanzi_container_page_pv">
                    | æµè§ˆé‡ï¼š<span id="busuanzi_value_page_pv"></span>ğŸ‘€
                </span>
                &nbsp|&nbsp
                è¿”å›<a href="./rem-i-want-job.html" target="_blank">
                    <æˆ‘æƒ³æ‰¾å·¥ä½œ>
                </a>
            </p>
        </section>
    </header>

    <!-- footer -->
    <footer>
        <p>
            &copy George Donne 2024-2025. All Rights Reserved. è‹ICPå¤‡2021027062å·-1&nbsp&nbsp|&nbsp&nbsp
            <a href="./logd-about.html">å…³äº</a>
        </p>

        <p>
            Support: <a href="mailto:georgedonnev2@outlook.com">georgedonnev2@outlook.com</a>
        </p>

        <p>
            <span id="busuanzi_container_site_pv">
                æœ¬ç«™æµè§ˆé‡ï¼š<span id="busuanzi_value_site_pv"></span>ğŸ‘€
            </span>
            &nbsp&nbsp|&nbsp&nbsp
            <span id="busuanzi_container_site_uv">
                æœ¬ç«™è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>ğŸ‘¤
            </span>
        </p>
    </footer>

    <!-- sidebar -->
    <aside>
        <p class="em-larger">ç›®å½•</p>

        <a href="#profile-xx">xxç®€ä»‹</a><br>
        &nbsp&nbsp<a href="#">xxxx</a><br>
    </aside>

    <!-- main -->
    <main class="with-sidebar">

        <section>
            <h2 id="mongodb-install">
                <a href="#mongodb-install">å®‰è£… MongoDB</a>
            </h2>

            <p>
                ç”±äºæœ¬æœºç”¨äº†å¦ä¸€ä¸ª admin ç”¨æˆ·å®‰è£…äº†ä¸€äº›ç¨‹åºï¼Œæ‰€ä»¥ç”¨å½“å‰ç”¨æˆ·å®‰è£… <code>brew install mongodb-atlas</code> ä¸æˆåŠŸã€‚å°±å†³å®šåœ¨æœ¬åœ°å®‰è£… MongoDBã€‚
            </p>
            <p>
                ä» MongoDB å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ã€‚ç½‘å€ï¼š<a href="https://www.mongodb.com/try/download/community"
                    target="_blank">https://www.mongodb.com/try/download/community</a>ï¼Œç›¸å…³ç‰ˆæœ¬ä¿¡æ¯ï¼šVersion - 8.0.0(current),
                Platform - macOS x64, Package - tgzã€‚
            </p>

            <p>
                ä¸‹è½½å®Œæˆåï¼Œæ‰§è¡Œè§£å‹ç¼©ï¼š<code>~/mongodb8 % tar -xvf mongodb-macos-x86_64-8.0.0.tgz</code>
            </p>

            <p>
                åœ¨ MongoDB 5.xx ä»¥åï¼Œå®‰è£…åŒ…ä¸­å°±æ²¡æœ‰ mongoï¼ˆå°±æ˜¯ MongoDB Shellï¼‰ï¼Œäºæ˜¯æ— æ³•ç”¨å‘½ä»¤è¡Œæ–¹å¼æ“ä½œ MongoDBã€‚ä»<a
                    href="https://www.mongodb.com/try/download/shell">https://www.mongodb.com/try/download/shell</a> ä¸‹è½½
                zip åŒ…ï¼Œè§£å‹åæ‰§è¡Œ mongosh å³å¯
            </p>

            å®‰è£…æ•°æ®åº“å·¥å…·ï¼šhttps://www.mongodb.com/docs/database-tools/installation/installation-macos/


            mongod --dbpath /usr/local/var/mongodb --logpath /usr/local/var/log/mongodb/mongo.log --fork
            mongod --dbpath ~/mongodb8/data --logpath ~/mongodb8/log/mongo.log --fork
            --dbpath è®¾ç½®æ•°æ®å­˜æ”¾ç›®å½•
            --logpath è®¾ç½®æ—¥å¿—å­˜æ”¾ç›®å½•
            --fork åœ¨åå°è¿è¡Œ



        </section>

        <section>
            <h2 id="db-design">
                <a href="#db-desgin">æ•°æ®åº“è®¾è®¡</a>
            </h2>

            <p>
                ã€Šè´¢å¯Œã€‹ä¸–ç•Œ500å¼ºæ’è¡Œæ¦œ
            </p>
            <p>
                collection: glb500_yr23

            </p>
            <p>
                rank: æ’å<br>
                name: å…¬å¸åç§°ã€‚æ¦œå•ä¸Šçš„å…¬å¸åç§°ã€‚<br>
                revenue: æ¦œå•ä¸Šå†™çš„è¥ä¸šæ”¶å…¥ã€‚å•ä½ï¼šç™¾ä¸‡ç¾å…ƒã€‚<br>
                profitï¼šæ¦œå•ä¸Šå†™çš„ä¾‹å¦‚ã€‚å•ä½ï¼šç™¾ä¸‡ç¾å…ƒã€‚<br>
                countryï¼šå…¬å¸æ‰€å±å›½å®¶ã€‚<br>
                name_frï¼šç»„ç»‡çš„æ­£å¼/æ³¨å†Œåç§°ã€‚æ¯”å¦‚ä¸­å›½ç§»åŠ¨çš„åç§°åº”è¯¥æ˜¯ä¸­å›½ç§»åŠ¨é€šä¿¡é›†å›¢æœ‰é™å…¬å¸ï¼Œè€Œä¸æ˜¯ä¸­å›½ç§»åŠ¨é€šä¿¡é›†å›¢å…¬å¸ï¼ˆè™½ç„¶2017å¹´ä¹‹å‰å«è¿™ä¸ªåå­—ï¼‰<br>
            </p>

            <p>
                <!-- mongoimport -h 127.0.0.1:27017 --authenticationDatabase=admin -u root -p c123456 -d czg -c tt2_csv --type=csv --headerline /root/mongo_export/czg_t2.csv -->
                mongoimport -d remai -c glb500_yr2023 --type=csv --headerline ~/mongodb8/inf-data/glb500-yr2023.csv
            </p>

            <section>
                <h3 id="student-path">
                    <a href="#student-path">æ¯•ä¸šç”Ÿå»å‘ä¿¡æ¯</a>
                </h3>

                <p>
                    collectionï¼šstudent_gy23<br>
                    2023å¹´æ¯•ä¸šçš„å­¦ç”Ÿ
                </p>
                <p>
                    sidï¼šå­¦å·ã€‚<br>
                    name: å§“åã€‚<br>
                    //gender: æ€§åˆ«ã€‚<br>
                    majorï¼šä¸“ä¸šã€‚<br>
                    path_after_graduateï¼šæ¯•ä¸šåçš„å»å‘ã€‚æ¯”å¦‚å‡å­¦ã€ç­¾ä¸‰æ–¹åè®®å…¥èŒï¼Œç­‰ç­‰ã€‚<br>
                    organizationï¼šé›‡ä½£å•ä½ã€‚<br>
                    type_orgï¼šé›‡ä½£å•ä½çš„æ€§è´¨ã€‚æ¯”å¦‚å›½ä¼ã€‚<br>
                    industry_orgï¼šé›‡ä½£å•ä½æ‰€å±è¡Œä¸šã€‚<br>
                    location_orgï¼šé›‡ä½£å•ä½æ‰€åœ¨åœ°ã€‚æ¯”å¦‚xxçœxxå¸‚xxåŒºã€‚<br>
                    position_typeï¼šå…¥èŒå²—ä½çš„ç±»åˆ«ã€‚<br>
                    degree: bachelor / master / doctor <br>
                    path_fr: å»å‘çš„è§„æ•´åç§°ï¼Œæ ¹æ® path_after_graduate å–å€¼å¾—åˆ°ã€‚æ¯”å¦‚ï¼š
                </p>
                <p>
                    mongoimport -d remai -c student_gy23 --type=csv --headerline ~/mongodb8/inf-data/student-gy23.csv
                </p>

                {








                "degree": "bachelor-23",
                "path_type": "got-job"
                }
            </section>


            <!--  -->
            <section>
                <h3 id="organization-info">
                    <a href="#organization-info">ç»„ç»‡ä¿¡æ¯</a>
                </h3>

                <p>
                    collection: organization<br>
                    ï¼ˆç»„ç»‡çš„ä¿¡æ¯ï¼‰
                </p>
                <p>
                    snï¼šåºå·ã€‚å”¯ä¸€ã€‚é‡‡ç”¨36è¿›åˆ¶ã€‚<br>
                    name_frï¼šç»„ç»‡çš„åç§°ï¼Œæ­£å¼/æ³¨å†Œçš„åç§°ã€‚<br>
                    name_akaï¼šç»„ç»‡çš„ç®€ç§°/ä¿—ç§°ã€‚æ¯”å¦‚ä¸­å›½ç§»åŠ¨é€šä¿¡é›†å›¢ï¼Œé€šå¸¸å«åšä¸­å›½ç§»åŠ¨ã€‚<br>
                    category: ç»„ç»‡çš„åˆ†ç±»ã€‚æ¯”å¦‚æ”¿åºœæœºå…³ã€äº‹ä¸šå•ä½ã€ä¼ä¸šã€å…¶ä»–ï¼Œç­‰ã€‚<br>
                    hierarchy_psnï¼šä¸Šçº§ç»„ç»‡çš„åºå·ã€‚<br>
                    h_comments: å±‚çº§å…³ç³»çš„ç›¸å…³è¯æ®ã€‚<br>


                </p>
                <p>
                    mongoimport -d remai -c organization --type=csv --headerline ~/mdb8/inf-data/organization.csv
                </p>

            </section>



        </section>

        <!--  -->
        <br>
        <hr>
        <section>
            <h2 id="db-ops">
                <a href="#db-ops">æ•°æ®åº“æ“ä½œ</a>
            </h2>

            <p>
                ä»¥ä¸‹ä»¥ MongoDB Compass v1.45.2 ä¸ºä¾‹ã€‚
            </p>
            <p>
                <span class="em-bold">1ã€åˆ é™¤æ–‡æ¡£documentçš„å­—æ®µfieldï¼Œç”¨ update ä¹‹ $unset</span>
            </p>
            <p>
                æ¯”å¦‚åˆ é™¤ db = remaiï¼Œ collection = student_y2023 ä¸­çš„ major å­—æ®µã€‚
            </p>
            <p>
                ï¼ˆ1ï¼‰é“¾æ¥æ•°æ®åº“åï¼Œåœ¨ç•Œé¢å·¦ä¾§é€‰æ‹©å¯¹åº”çš„ collectionã€‚<br>
                ï¼ˆ2ï¼‰ç„¶ååœ¨ document tabä¸­ï¼Œç‚¹å‡» update æŒ‰é’®ã€‚<br>
                ï¼ˆ3ï¼‰åœ¨å‡ºç°çš„ç•Œé¢çš„ update æ¡†è¾“å…¥å¦‚ä¸‹ä¿¡æ¯ï¼Œå°±å¯ä»¥äº†ã€‚ 
            </p>




            <pre><code>
{
    $unset: {
        major: ""
    }
}
            </code></pre>
            </p>

            <p>
                2ã€å¢åŠ å­—æ®µAï¼Œç”¨ aggregate ä¹‹ $addFieldsã€‚
            </p>

            <p>
                æ¯”å¦‚å¢åŠ ä¸€ä¸ªå­—æ®µ usnï¼Œå–å€¼ç­‰äºå·²æœ‰å­—æ®µ snã€‚
            </p>
            <p>
                (1) é“¾æ¥æ•°æ®åº“åï¼Œåœ¨ç•Œé¢å·¦ä¾§é€‰æ‹©å¯¹åº”çš„ collectionã€‚<br>
                (2) ç„¶åé€‰æ‹© Aggregation tabï¼Œç‚¹å‡» add Stage æŒ‰é’®ã€‚<br>
                (3) åœ¨å‡ºç°çš„ç•Œé¢ä¸­ï¼Œé€‰æ‹© $addFields,bing è¾“å…¥å¦‚ä¸‹ä¿¡æ¯ï¼Œå°±å¯ä»¥äº†ã€‚ 
                <pre><code>
 /**
 * newField: The new field name.
 * expression: The new field expression.
 */
{
  usn: "$sn"
}</code></pre>
            </p>

            <p>
                <span class="em-bold">3ã€å®Œå…¨å¤åˆ¶é›†åˆAåˆ°é›†åˆBï¼Œå¯ä»¥ä½¿ç”¨ aggregate ä¹‹ $match $out </span>
            </p>
            <p>
                æ¯”å¦‚å¤åˆ¶é›†åˆ list_soe åˆ° bk_list_soe åšå¤‡ä»½ï¼Œåˆ™å¯ä»¥åœ¨ mongosh ä¸­æ‰§è¡Œ 
                <code>db.list_soe.aggregate([{ $match: {} }, { $out: "bk_list_soe" }])</code>
            </p>

            <p>
                <span class="em-bold">4ã€ä¿®æ”¹å­—æ®µåï¼Œå¯ä»¥ä½¿ç”¨ updateMany ä¹‹ $rename </span>
            </p>
            <p>
                æ¯”å¦‚å°†å­—æ®µå sn ä¿®æ”¹ä¸º usnï¼Œåˆ™å¯ä»¥åœ¨ mongosh ä¸­æ‰§è¡Œ 
                <code>db.bk_list_soe.updateMany({},{$rename:{"sn":"usn"}})</code>
            </p>

            db.bk_list_soe.updateMany({},{$set:{"sn123":"$usn"}})
           

        </section>

        <section>
            <h2 id="reference-info">
                <a href="#reference-info">å‚è€ƒä¿¡æ¯</a>
            </h2>
            <p>
                Python Faker ç”Ÿæˆæ•°æ®åº“æµ‹è¯•æ•°æ®ã€‚ï¼ˆ241227ï¼‰
            </p>
        </section>

    </main>

</body>

</html>